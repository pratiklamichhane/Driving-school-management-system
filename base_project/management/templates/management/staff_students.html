{% extends "management/base.html" %}
{% block body %}
<!-- management/staff_students.html -->

    <div class="container-fluid">
        <h4 class="m-3 mb-0"></i> Students assisted by : {{ staff.staff_name }}
        </h4>
        <h6 class="m-3 mb-0">Total student assisted: <strong>{{staff.students_assigned.count}}</strong></h6>
        <a href="{% url "staffs" %}" class="btn btn-primary m-3 mb-0">GO BACK</a>
        <div class="row">
          <div class="col-12">
            <div class="card text-white bg-primary m-3" bis_skin_checked="1">
              <div class="card-header" bis_skin_checked="1"><i class="ri-user-fill"></i> Student Records of {{staff.staff_name}}
            </div>
              <div class="card-body" bis_skin_checked="1">
            
                <p class="card-text">
                  <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr class="table-primary">
                        <th scope="col">ID</th>
                        <th scope="col">Full Name</th>
                        <th scope="col">Date Enrolled</th>
                        <th scope="col">Phone Number</th>
                        <th scope="col">Time Slot</th>
                        <th scope="col">Vechile Type</th>
                        <th scope="col">Staff Assigned</th>
                        <th scope="col">Enrollment</th>
                        <th scope="col">Payment</th>
                        <th scope="col">Actions</th>
                      </tr>
                    </thead>
                   {% for student in staff.students_assigned.all %}
                   <tr>
                    <td>{{ student.id }}</td>
                    <td>{{ student.student_name }}</td>
                    <td>{{ student.date_enrolled }}</td>
                    <td>{{ student.phone_number }}</td>
                    <td>{{ student.time_slot }}</td>
                    <td>{{ student.vehicle_type }}</td>
                    <td>{{ student.staff_assigned }}</td>
                    <td>{{ student.enrollment_status}}</td>
                    <td>{{ student.payment_status}}</td>
                    <td><a type="button" class="btn btn-primary" href="{% url 'view_student' student.id%}" data-bs-toggle="modal" data-bs-target="#mymodal{{student.id}}"
                      ><i class="ri-eye-line"></i></a>
                      {% comment %} modal view student {% endcomment %}
                      <div class="modal" bis_skin_checked="1" id="mymodal{{student.id}}" tabindex="-1" aria-labelledby="mymodellabel1" aria-hidden="true" >
                        <div class="modal-dialog" role="document" bis_skin_checked="1">
                          <div class="modal-content" bis_skin_checked="1">
                            <div class="modal-header" bis_skin_checked="1">
                              <h5 class="modal-title"><i class="ri-profile-line"></i> {{student.student_name}}</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true"></span>
                              </button>
                            </div>
                            <div class="modal-body" bis_skin_checked="1">
                              <p><i class="ri-profile-line"></i> ID : <strong>{{student.id}}</strong></p>
                              <p><i class="ri-user-3-line"></i> Full Name : <strong>{{student.student_name}}</strong></p>
                              <p><i class="ri-phone-line"></i> Phone No : <strong>{{student.phone_number}}</strong></p>
                              <p><i class="ri-calendar-line"></i> Date Start : <strong>{{student.date_enrolled}}</strong></p>
                              <p><i class="ri-time-line"></i> Time Slot : <strong>{{student.time_slot}}</strong></p>
                              <p><i class="ri-car-line"></i> Vehicle Type : <strong>{{student.vehicle_type}}</strong></p>
                              <p><i class="ri-pass-valid-fill"></i> Enrollment Status : <strong>{{student.enrollment_status}}</strong></p>
                              <p><i class="ri-wallet-2-line"></i> Payment Status: <strong>{{student.payment_status}}</strong></p>
                              <p><i class="ri-money-dollar-box-line"></i> Final Amount: <strong>{{student.final_amount}}</strong></p>
                              <p><i class="ri-map-pin-user-line"></i> Staff Assigned: <strong>{{staff.staff_name}}</strong></p>
                            </div>
                            <div class="modal-footer" bis_skin_checked="1">
                              <button type="button" class="btn btn-warning"><i class="ri-edit-box-line"></i> Edit Student</button>
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </td>
                   </tr>
                   {% endfor %}
                    </tbody>
                  </table>
                  <a href="{% url "index" %}" class="btn btn-secondary ">GO TO DASHBOARD</a>
                </div>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>


{% endblock body %}